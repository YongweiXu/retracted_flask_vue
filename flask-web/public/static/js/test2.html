<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Awesome-pyecharts</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: transparent;
            overflow-y: hidden;
        }

        .chart-container {
            width: 1800px;
            height: 1200px;
        }
    </style>
    <script type="text/javascript" src="echarts.min.js"></script>
    <script type="text/javascript" src="world.js"></script>
</head>
<body>
    <div id="container" class="chart-container"></div>
    <script>
        var chart_container = echarts.init(
            document.getElementById('container'), 'white', {renderer: 'canvas'});

        fetch('http://127.0.0.1:5000/country')
            .then(response => response.json())
            .then(data => {
                var option_container = {
                    "series": [
                        {
                            "type": "map",
                            "name": "country",
                            "label": {
                                "show": false,
                                "position": "top",
                                "margin": 8
                            },
                            "mapType": "world",
                            "data": data,
                            "roam": true,
                            "zoom": 1,
                            "showLegendSymbol": false,
                            "itemStyle": {
                                "normal": {
                                    "areaColor": "#f8f8cb",
                                    "borderColor": "#999"
                                },
                                "emphasis": {
                                    "areaColor": "#ccc"
                                }
                            },
                            "visualMap": {
                                "min": 1,
                                "max": 11050,
                                "text": ["High", "Low"],
                                "calculable": true,
                                "inRange": {
                                    "color": ['#d73027', '#fc8d59', '#fee08b', '#d9ef8b', '#91cf60', '#1a9850', '#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00'] // 更多的颜色选项
                                }
                            }
                        }
                    ],
                    "tooltip": {
                        "show": true,
                        "trigger": "item",
                        "triggerOn": "mousemove|click",
                        "axisPointer": {
                            "type": "line"
                        },
                        "textStyle": {
                            "fontSize": 14
                        },
                        "borderWidth": 0
                    }
                };

                data.forEach((item, index) => {
                    option_container.series[0].data[index].itemStyle = {
                        "color": index === 0 ? "#B22222" :
                                 index === 1 ? "#A52A2A" :
                                 index === 2 ? "#C63C3C" :
                                 index === 3 ? "#A0522D" :
                                 index === 4 ? "#bf7635" :
                                 index === 5 ? "#ca9354" :
                                 index === 6 ? "#d6a54a" :
                                 index === 7 ? "#e4c217" :
                                 index === 8 ? "#ecd781" :
                                 index === 9 ? "#edca8d" :
                                 index === 10 ? "#5247AE" :
                                 index === 11 ? "#7C89DC" :
                                 index === 12 ? "#7C89DC" :
                                 index === 13? "#7C89DC" :
                                 index === 14 ? "#7C89DC" :
                                 index === 15 ? "#9b95c3" :
                                 index === 16 ? "#9b95c3" :
                                 index === 17 ? "#9b95c3" :
                                 index === 18 ? "#9b95c3" :
                                 index === 19 ? "#9b95c3" :
                                 index === 20 ? "#9b95c3" :
                                 index === 21 ? "#9b95c3" :
                                 index === 22 ? "#9b95c3" :
                                 index === 23 ? "#ddcbdd" :
                                 index === 24 ? "#ddcbdd" :
                                 index === 25 ? "#ddcbdd" :
                                 index === 26 ? "#ddcbdd" :
                                 index === 27 ? "#ddcbdd" :
                                 index === 28 ? "#ddcbdd" :
                                 index === 29 ? "#ddcbdd" :
                                 index === 30 ? "#ddcbdd" :
                                 index === 31 ? "#ddcbdd" :
                                 index === 32 ? "#ddcbdd" :
                                 index === 33 ? "#ddcbdd" :
                                 index === 34 ? "#ddcbdd" :
                                 "#B0C4DE"
                    };
                });

                chart_container.setOption(option_container);
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>
</body>
</html>
