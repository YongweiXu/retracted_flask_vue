(function(){var t={3448:function(t,e,a){"use strict";var i=a(641);function o(t,e,a,o,s,n){const r=(0,i.g2)("index-page");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(r)])}const s=(0,i.Fv)('<img src="/static/images/bg2.png" alt="" class="bg-image" data-v-693188a3><div data-v-693188a3><h1 data-v-693188a3>生物医学撤稿大数据看板</h1></div><div data-v-693188a3><p data-v-693188a3><span data-v-693188a3>&quot;生物医学撤稿大数据看板&quot;是一个基于PubMed数据库的项目，旨在为研究人员和学者提供一个集中</span><br data-v-693188a3><span data-v-693188a3>展示生物医学领域撤稿文献信息的平台。该项目的目标是为生物医学研究者提供一个高效、</span><br data-v-693188a3><span data-v-693188a3>便捷的信息管理和分析工具，帮助他们更好地了解领域动态、指导研究方向，</span><br data-v-693188a3><span data-v-693188a3>并促进学术交流和合作。通过该平台，用户可以从首页直接进</span><br data-v-693188a3><span data-v-693188a3>入看板页面，即可对生物医学撤稿文献信息进行了解</span></p></div>',3),n=[s];function r(t,e,a,o,s,r){return(0,i.uX)(),(0,i.CE)("div",{onClick:e[0]||(e[0]=(...t)=>r.redirectToHomePage&&r.redirectToHomePage(...t))},n)}a(4114);var c={methods:{redirectToHomePage(){this.$router.push({name:"HomePage"})}}},l=a(6262);const d=(0,l.A)(c,[["render",r],["__scopeId","data-v-693188a3"]]);var h=d,p={name:"App",components:{IndexPage:h}};const u=(0,l.A)(p,[["render",o]]);var v=u,m=(a(1384),a(7612)),f=a(33);const b=t=>((0,i.Qi)("data-v-6a7a7cc6"),t=t(),(0,i.jt)(),t),g={class:"head clearfix"},y=(0,i.Fv)('<h1 class="pulll_left" data-v-6a7a7cc6>生物医学期刊撤稿大数据可视化看板</h1><div class="menu menu2 pulll_left" data-v-6a7a7cc6><ul data-v-6a7a7cc6><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>首页</a></li><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>导航标题样式</a></li><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>导航标题</a></li><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>导航标题</a></li><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>导航标题</a></li><li data-v-6a7a7cc6><a href="https://gitee.com/iGaoWei/big-data-view" data-v-6a7a7cc6>导航标题</a></li></ul></div>',2),x={class:"time"},w={class:"mainbox"},k={class:"clearfix nav1"},L={style:{width:"22%"}},P={class:"box"},C=b((()=>(0,i.Lk)("div",{class:"tit"},"数据信息一览",-1))),j={class:"boxnav",style:{height:"330px"}},O={class:"yqlist"},A={class:"clearfix"},I={class:"yq",id:"yq"},T=b((()=>(0,i.Lk)("span",null,"总数据量",-1))),S={class:"yq"},E=b((()=>(0,i.Lk)("span",null,"未被退稿数据量数据量",-1))),_={class:"yq"},M=b((()=>(0,i.Lk)("span",null,"被退稿数据量",-1))),W=b((()=>(0,i.Lk)("li",null,[(0,i.Lk)("div",{class:"yq"},"57241"),(0,i.Lk)("span",null,"模型训练数据量")],-1))),$=b((()=>(0,i.Lk)("div",{class:"box"},[(0,i.Lk)("div",{class:"tit"},"退稿作者top15"),(0,i.Lk)("div",{class:"boxnav",style:{height:"430px"}},[(0,i.Lk)("div",{id:"myRanking",style:{height:"430px"}})])],-1))),B={style:{width:"56%"}},R={class:"box"},q={class:"boxnav mapc",style:{height:"550px",position:"relative"}},F={class:"map",id:"map"},G=["src"],X={class:"box"},D=b((()=>(0,i.Lk)("div",{class:"tit"},"撤稿信息轮播图",-1))),H={class:"boxnav",style:{height:"250px"},id:"echart3"},z=["src"],V=(0,i.Fv)('<li style="width:22%;" data-v-6a7a7cc6><div class="box" data-v-6a7a7cc6><div class="tit" data-v-6a7a7cc6>关键词共现矩阵</div><div class="boxnav" style="height:200px;" data-v-6a7a7cc6><div id="myMatrix" style="height:140%;width:100%;" data-v-6a7a7cc6></div></div></div><div class="box" data-v-6a7a7cc6><div class="tit" data-v-6a7a7cc6>年份撤稿关系</div><div class="boxnav" style="height:250px;" data-v-6a7a7cc6><div id="myChart4" style="height:100%;width:100%;" data-v-6a7a7cc6></div></div></div><div class="box" data-v-6a7a7cc6><div class="tit" data-v-6a7a7cc6>期刊年份退稿关系</div><div class="boxnav" style="height:250px;" data-v-6a7a7cc6><div id="myChart2" style="height:100%;width:100%;" data-v-6a7a7cc6></div></div></div></li>',1);function N(t,e,a,o,s,n){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("div",g,[y,(0,i.Lk)("div",x,(0,f.v_)(s.currentTime),1)]),(0,i.Lk)("div",w,[(0,i.Lk)("ul",k,[(0,i.Lk)("li",L,[(0,i.Lk)("div",P,[C,(0,i.Lk)("div",j,[(0,i.Lk)("div",O,[(0,i.Lk)("ul",A,[(0,i.Lk)("li",null,[(0,i.Lk)("div",I,(0,f.v_)(s.Original+s.Pass),1),T]),(0,i.Lk)("li",null,[(0,i.Lk)("div",S,(0,f.v_)(s.Pass),1),E]),(0,i.Lk)("li",null,[(0,i.Lk)("div",_,(0,f.v_)(s.Original),1),M]),W])])])]),$]),(0,i.Lk)("li",B,[(0,i.Lk)("div",R,[(0,i.Lk)("div",q,[(0,i.Lk)("div",F,[(0,i.Lk)("iframe",{ref:"iframe",src:s.htmlSrc,width:"100%",height:"100%",frameborder:"0"},null,8,G)])])]),(0,i.Lk)("div",X,[D,(0,i.Lk)("div",H,[(0,i.Lk)("iframe",{ref:"iframe",src:s.htmlSrc2,width:"100%",height:"100%",frameborder:"0",style:{height:"100%"}},null,8,z)])])]),V])])])}var U=a(4970);function Q(t){fetch("http://127.0.0.1:5000/Coc").then((t=>t.json())).then((e=>{const a=e.matrix,i=e.term1,o=e.term2,s=[];for(let t=0;t<i.length;t++)for(let e=0;e<o.length;e++)s.push([o[e],i[t],a[t][e]]);const n={tooltip:{position:"top",formatter:function(t){return t.data[1]+"<br>"+t.data[0]+"<br>"+t.data[2]}},xAxis:{type:"category",data:o,show:!1},yAxis:{type:"category",data:i,show:!1},visualMap:{min:0,max:5e3,calculable:!1,orient:"horizontal",left:"center",bottom:"12%"},series:[{name:"共现矩阵",type:"heatmap",data:s,label:{show:!1},emphasis:{itemStyle:{shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};t.setOption(n);const r=t.getDom().parentNode;r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center"})).catch((t=>{console.error("Error fetching data:",t)}))}function Y(t){fetch("http://localhost:5000/AU").then((t=>t.json())).then((e=>{const a=Object.keys(e),i=Object.values(e),o={grid:{left:"0",top:"0",right:"0",bottom:"0%",containLabel:!0},xAxis:{show:!1},yAxis:[{show:!0,data:a,inverse:!0,axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{color:"#fff"}}},{show:!1,inverse:!0,data:i,axisLabel:{textStyle:{color:"#fff"}},axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}}],series:[{name:"条",type:"bar",yAxisIndex:0,data:i,barWidth:15,itemStyle:{normal:{barBorderRadius:50,color:"#1089E7"}},label:{normal:{show:!0,position:"right",formatter:"{c}",textStyle:{color:"rgba(255,255,255,.5)"}}}}]};t.setOption(o),window.addEventListener("resize",(function(){t.resize()}))})).catch((t=>{console.error("获取数据时出错：",t)}))}var Z=a(352);function J(t){fetch("http://localhost:5000/PU").then((t=>t.json())).then((e=>{const a=e.data.slice(1).map((t=>t.split(","))),i=a.map((t=>t[0])),o=e.data[0].split(",").slice(1),s=a.map(((t,e)=>({type:"line",smooth:!0,seriesLayoutBy:"row",emphasis:{focus:"series"},showSymbol:!0,name:i[e],data:t.slice(1).map((t=>parseFloat(t)))}))),n={legend:!1,tooltip:{trigger:"axis",formatter:function(t){const e=t[0];return e.seriesName+"<br/>"+e.name+" : "+e.value}},dataset:{source:[["product",...o],...a]},xAxis:{type:"category",data:o,axisPointer:{type:"shadow"}},yAxis:{gridIndex:0},grid:{top:"55%"},dataZoom:[{type:"inside",xAxisIndex:0,start:0,end:100}],series:s.concat({type:"pie",id:"pie",radius:"30%",center:["50%","25%"],emphasis:{focus:"self"},label:{normal:{show:!1},emphasis:{show:!0,formatter:"{b}: {@2012} ({d}%)"}},encode:{itemName:"product",value:"2012",tooltip:"2012"}})};t.on("updateAxisPointer",(function(e){const a=e.axesInfo[0];if(a){const e=a.value+1;t.setOption({series:{id:"pie",label:{formatter:"{b}: {@"+e+"} ({d}%)"},encode:{value:e,tooltip:e}}})}})),t.setOption(n)})).catch((t=>{console.error("获取数据时出错：",t)}))}function K(t){function e(){return fetch("http://localhost:5000/PY").then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).catch((t=>{console.error("There was a problem with your fetch operation:",t)}))}const a={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{show:!0,feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value",name:"Counts",axisPointer:{snap:!0}},dataZoom:[{type:"inside",start:0,end:100}],series:[{name:"Rejection Counts",type:"line",smooth:!0,data:[],animation:!1}]};e().then((e=>{if(console.log("Received data from backend:",e),e&&e.length>0){const i=e.sort(((t,e)=>t["年份"]-e["年份"])),o=i.map((t=>t["年份"])),s=i.map((t=>t["计数"]));a.xAxis.data=o,a.series[0].data=s.map(((t,e)=>({value:t,itemStyle:e>0&&t>s[e-1]?{color:"green"}:{color:"red"}}))),console.log("Prepared option:",a),t.setOption(a)}else console.error("Invalid data received from backend:",e)}))}var tt={data(){return{currentTime:"",htmlSrc:"static/js/test2.html",htmlSrc2:"static/js/test.html",salesTotal:2634,Original:"",Pass:""}},mounted(){Z.A.get("http://localhost:5000/counts").then((t=>{this.Original=t.data.re_count,this.Pass=t.data.pass_count})),this.updateTime(),setInterval(this.updateTime,1e3),window.addEventListener("message",this.getiframeMsg);const t=U.Ts(document.getElementById("myRanking")),e=U.Ts(document.getElementById("myChart4")),a=U.Ts(document.getElementById("myChart2"));this.initMatrixChart(),Y(t),K(e),J(a)},methods:{updateTime(){const t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes(),n=t.getSeconds();this.currentTime=`${e}/${a}/${i} ${o}:${s}:${n}`},initMatrixChart(){const t=U.Ts(document.getElementById("myMatrix"));Q(t)},getiframeMsg(t){const e=t.data;console.log(t),"myIframe"==e.cmd&&console.log(e)},vueSendMsg(){const t=this.$refs.iframe.contentWindow;t.postMessage({cmd:"myVue",params:{info:"Vue向iframe传递的消息"}},"*")},iframeMethods(){this.$refs.iframe.contentWindow.triggerByVue("通过Vue触发iframe中的方法")}}};const et=(0,l.A)(tt,[["render",N],["__scopeId","data-v-6a7a7cc6"]]);var at=et,it=a(3751);function ot(t,e,a,o,s,n){const r=(0,i.g2)("pie-chart");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.textInput=t),placeholder:"请输入文本",rows:"10",cols:"50"},null,512),[[it.Jo,s.textInput]]),(0,i.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>n.predict&&n.predict(...t))},"预测"),(0,i.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>n.showChart&&n.showChart(...t))},"显示图表"),s.showChartDialog?((0,i.uX)(),(0,i.Wv)(r,{key:0,"pass-probability":s.passProbability,"rejected-probability":s.rejectedProbability},null,8,["pass-probability","rejected-probability"])):(0,i.Q3)("",!0)])}const st={ref:"pieChart",style:{width:"400px",height:"400px"}};function nt(t,e,a,o,s,n){return(0,i.uX)(),(0,i.CE)("div",st,null,512)}var rt={props:["passProbability","rejectedProbability"],mounted(){this.drawPieChart()},methods:{drawPieChart(){const t=U.Ts(this.$refs.pieChart),e={title:{text:"预测结果",subtext:"通过概率 vs 拒绝概率",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["通过概率","拒绝概率"]},series:[{name:"预测结果",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:this.passProbability,name:"通过概率"},{value:this.rejectedProbability,name:"拒绝概率"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};t.setOption(e)}}};const ct=(0,l.A)(rt,[["render",nt],["__scopeId","data-v-68ea630f"]]);var lt=ct,dt={data(){return{textInput:"",predictionResult:null,passProbability:0,rejectedProbability:0,showChartDialog:!1}},components:{PieChart:lt},methods:{async predict(){try{const t=await Z.A.post("http://localhost:5000/predict",{term:this.textInput});this.textInput="",this.predictionResult=t.data,this.passProbability=this.predictionResult.probabilities.pass,this.rejectedProbability=this.predictionResult.probabilities.rejected}catch(t){console.error("预测请求出错：",t)}},showChart(){this.showChartDialog=!0}}};const ht=(0,l.A)(dt,[["render",ot]]);var pt=ht;const ut=(0,m.aE)({history:(0,m.LA)(),routes:[{path:"/",name:"Index",component:h},{path:"/homepage",name:"HomePage",component:at},{path:"/prediction",name:"Prediction",component:pt}]});var vt=ut;document.title="退稿数据可视化大屏",(0,it.Ef)({router:vt,render:()=>v}).mount("#app")},1384:function(){const t=80;function e(){const e=document.documentElement.clientWidth/1920;document.documentElement.style.fontSize=t*Math.min(e,2)+"px"}e(),window.onresize=function(){e()}}},e={};function a(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,i,o,s){if(!i){var n=1/0;for(d=0;d<t.length;d++){i=t[d][0],o=t[d][1],s=t[d][2];for(var r=!0,c=0;c<i.length;c++)(!1&s||n>=s)&&Object.keys(a.O).every((function(t){return a.O[t](i[c])}))?i.splice(c--,1):(r=!1,s<n&&(n=s));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[i,o,s]}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,n=i[0],r=i[1],c=i[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(c)var d=c(a)}for(e&&e(i);l<n.length;l++)s=n[l],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},i=self["webpackChunkflask_web"]=self["webpackChunkflask_web"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],(function(){return a(3448)}));i=a.O(i)})();